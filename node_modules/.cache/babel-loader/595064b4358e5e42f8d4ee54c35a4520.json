{"ast":null,"code":"import { takeLatest, put, all } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { LOGIN_ADMIN_SUCCESS, LOGIN_ADMIN_REQUEST } from \"../types/loginAdmin\";\n\nfunction* getDataLogin({\n  email,\n  password\n}) {\n  try {\n    console.log(email, password);\n    const res = yield axios.post(\"http://dboi.info/api/sign_in\", {\n      email: email,\n      password: password\n    });\n\n    if (res.data.data.user.role === \"admin\") {\n      // trong thông tin có role để check quyền,\n      const {\n        data\n      } = res.data;\n      console.log(data);\n      yield put({\n        type: LOGIN_ADMIN_SUCCESS,\n        payload: data,\n        mess: null\n      }); // nếu tài khoản có quyền admin thì truyền dâta cho reducer\n    } else {\n      console.log(\"Không có quyền truy cập\");\n    }\n  } catch (error) {\n    yield put({\n      type: LOGIN_ADMIN_SUCCESS,\n      payload: false,\n      mess: \"Sai Email hoặc mật khẩu\"\n    });\n  }\n}\n\nfunction* getLogin() {\n  yield takeLatest(LOGIN_ADMIN_REQUEST, getDataLogin);\n}\n\nexport default function* () {\n  yield all([getLogin()]);\n}","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/redux/sagas/loginAdmin.js"],"names":["takeLatest","put","all","axios","LOGIN_ADMIN_SUCCESS","LOGIN_ADMIN_REQUEST","getDataLogin","email","password","console","log","res","post","data","user","role","type","payload","mess","error","getLogin"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,GAA1B,QAAqC,oBAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,mBAAT,EAA8BC,mBAA9B,QAAyD,qBAAzD;;AAEA,UAAUC,YAAV,CAAuB;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAvB,EAA4C;AAC1C,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ,EAAmBC,QAAnB;AACA,UAAMG,GAAG,GAAG,MAAMR,KAAK,CAACS,IAAN,CAAW,8BAAX,EAA2C;AAAEL,MAAAA,KAAK,EAAEA,KAAT;AAAgBC,MAAAA,QAAQ,EAAEA;AAA1B,KAA3C,CAAlB;;AACA,QAAIG,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcC,IAAd,CAAmBC,IAAnB,KAA4B,OAAhC,EAAyC;AAAG;AAC1C,YAAM;AAAEF,QAAAA;AAAF,UAAWF,GAAG,CAACE,IAArB;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AACA,YAAMZ,GAAG,CAAC;AAAEe,QAAAA,IAAI,EAAEZ,mBAAR;AAA6Ba,QAAAA,OAAO,EAAEJ,IAAtC;AAA4CK,QAAAA,IAAI,EAAE;AAAlD,OAAD,CAAT,CAHuC,CAG8B;AACtE,KAJD,MAIO;AACLT,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AACF,GAVD,CAUE,OAAOS,KAAP,EAAc;AACd,UAAMlB,GAAG,CAAC;AAAEe,MAAAA,IAAI,EAAEZ,mBAAR;AAA6Ba,MAAAA,OAAO,EAAE,KAAtC;AAA4CC,MAAAA,IAAI,EAAE;AAAlD,KAAD,CAAT;AACD;AACF;;AAGD,UAAUE,QAAV,GAAqB;AACnB,QAAMpB,UAAU,CAACK,mBAAD,EAAsBC,YAAtB,CAAhB;AACD;;AAED,eAAe,aAAa;AAC1B,QAAMJ,GAAG,CAAC,CAACkB,QAAQ,EAAT,CAAD,CAAT;AACD","sourcesContent":["import { takeLatest, put, all } from \"redux-saga/effects\";\r\nimport axios from \"axios\";\r\nimport { LOGIN_ADMIN_SUCCESS, LOGIN_ADMIN_REQUEST } from \"../types/loginAdmin\";\r\n\r\nfunction* getDataLogin({ email, password }) {\r\n  try {\r\n    console.log(email, password);\r\n    const res = yield axios.post(\"http://dboi.info/api/sign_in\", { email: email, password: password, });\r\n    if (res.data.data.user.role === \"admin\") {  // trong thông tin có role để check quyền,\r\n      const { data } = res.data;\r\n      console.log(data);\r\n      yield put({ type: LOGIN_ADMIN_SUCCESS, payload: data, mess: null }); // nếu tài khoản có quyền admin thì truyền dâta cho reducer\r\n    } else {\r\n      console.log(\"Không có quyền truy cập\");\r\n    }\r\n  } catch (error) {\r\n    yield put({ type: LOGIN_ADMIN_SUCCESS, payload: false,mess: \"Sai Email hoặc mật khẩu\" });\r\n  }\r\n}\r\n\r\n\r\nfunction* getLogin() {\r\n  yield takeLatest(LOGIN_ADMIN_REQUEST, getDataLogin);\r\n}\r\n\r\nexport default function* () {\r\n  yield all([getLogin()]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}