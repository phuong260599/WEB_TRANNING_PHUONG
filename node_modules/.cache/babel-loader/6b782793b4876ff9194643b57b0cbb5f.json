{"ast":null,"code":"import { takeLatest, put, all } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { CATE_GET_REQUEST, CATE_GET_SUCCESS, CATE_DELETE_REQUEST, CATE_DELETE_SUCCESS, CATE_SUBMIT_REQUEST, CATE_SUBMIT_SUCCESS, CATE_GET_EDIT_REQUEST, CATE_GET_EDIT_SUCCESS, CATE_UPDATE_EDIT_REQUEST, CATE_UPDATE_EDIT_SUCCESS } from \"../types/categories\";\n\nfunction* getData() {\n  const res = yield axios.get(\"http://dboi.info/api/categories\");\n\n  if (res.status === 200) {\n    const {\n      data\n    } = res.data;\n    yield put({\n      type: CATE_GET_SUCCESS,\n      payload: data\n    });\n  }\n}\n\nfunction* getListCate() {\n  yield takeLatest(CATE_GET_REQUEST, getData);\n} //DELETE\n\n\nfunction* getDatatoDelete(action) {\n  try {\n    var data = localStorage.getItem(\"LOGINADMIN\");\n    axios.defaults.headers.common['AUTH-TOKEN'] = data;\n    const {\n      id\n    } = action;\n    const res = yield axios.delete(`http://dboi.info/api/categories/${id}`);\n\n    if (res.status === 200) {\n      const {\n        id\n      } = action;\n      yield put({\n        type: CATE_DELETE_SUCCESS,\n        payloadid: id\n      });\n    }\n  } catch (erro) {\n    console.log(erro);\n  }\n}\n\nfunction* getID() {\n  yield takeLatest(CATE_DELETE_REQUEST, getDatatoDelete);\n} //SUBMIT\n\n\nfunction* getDatatoSubmit({\n  cate\n}) {\n  var data = localStorage.getItem(\"LOGINADMIN\");\n  axios.defaults.headers.common['AUTH-TOKEN'] = data;\n  const res = yield axios.post(\"http://dboi.info/api/categories\", {\n    name: cate\n  });\n  console.log(\"res\", res);\n\n  if (res.status === 200 && res.data.code === 200) {\n    const {\n      data\n    } = res.data;\n    console.log(data);\n    yield put({\n      type: CATE_SUBMIT_SUCCESS,\n      payload: data\n    }); //\n  }\n}\n\nfunction* getListSubmit() {\n  yield takeLatest(CATE_SUBMIT_REQUEST, getDatatoSubmit);\n} // GET_EDIT\n\n\nfunction* getDatatEdit({\n  id\n}) {\n  var data = localStorage.getItem(\"LOGINADMIN\");\n  axios.defaults.headers.common['AUTH-TOKEN'] = data;\n  const res = yield axios.get(`http://dboi.info/api/categories/${id}`);\n\n  if (res.status === 200 && res.data.code === 200) {\n    const {\n      data\n    } = res.data;\n    yield put({\n      type: CATE_GET_EDIT_SUCCESS,\n      payload: data\n    });\n  }\n}\n\nfunction* getDatatoEdit() {\n  yield takeLatest(CATE_GET_EDIT_REQUEST, getDatatEdit);\n} // UPDATE_EDIT\n\n\nfunction* getUpdate({\n  data\n}) {\n  try {\n    var dataAdmin = localStorage.getItem(\"LOGINADMIN\"); // \n\n    axios.defaults.headers.common['AUTH-TOKEN'] = dataAdmin;\n    const res = yield axios.put(`http://dboi.info/api/categories/${data.id}`, {\n      name: data.name\n    });\n\n    if (res.status === 200 && res.data.code === 200) {\n      const {\n        data\n      } = res.data;\n      yield put({\n        type: CATE_UPDATE_EDIT_SUCCESS,\n        payload: data\n      });\n    }\n  } catch (error) {\n    if (error.response.status === 401) {\n      localStorage.removeItem(\"ADMIN\");\n    }\n  }\n}\n\nfunction* getUpdateEdit() {\n  yield takeLatest(CATE_UPDATE_EDIT_REQUEST, getUpdate);\n}\n\nexport default function* () {\n  yield all([getID(), getListCate(), //getdata\n  getListSubmit(), getDatatoEdit(), getUpdateEdit()]);\n}","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/redux/sagas/categories.js"],"names":["takeLatest","put","all","axios","CATE_GET_REQUEST","CATE_GET_SUCCESS","CATE_DELETE_REQUEST","CATE_DELETE_SUCCESS","CATE_SUBMIT_REQUEST","CATE_SUBMIT_SUCCESS","CATE_GET_EDIT_REQUEST","CATE_GET_EDIT_SUCCESS","CATE_UPDATE_EDIT_REQUEST","CATE_UPDATE_EDIT_SUCCESS","getData","res","get","status","data","type","payload","getListCate","getDatatoDelete","action","localStorage","getItem","defaults","headers","common","id","delete","payloadid","erro","console","log","getID","getDatatoSubmit","cate","post","name","code","getListSubmit","getDatatEdit","getDatatoEdit","getUpdate","dataAdmin","error","response","removeItem","getUpdateEdit"],"mappings":"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","sourcesContent":["import { takeLatest, put, all } from \"redux-saga/effects\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  CATE_GET_REQUEST,\r\n  CATE_GET_SUCCESS,\r\n  CATE_DELETE_REQUEST,\r\n  CATE_DELETE_SUCCESS,\r\n  CATE_SUBMIT_REQUEST,\r\n  CATE_SUBMIT_SUCCESS,\r\n  CATE_GET_EDIT_REQUEST,\r\n  CATE_GET_EDIT_SUCCESS,\r\n  CATE_UPDATE_EDIT_REQUEST,\r\n  CATE_UPDATE_EDIT_SUCCESS,\r\n} from \"../types/categories\";\r\n\r\nfunction* getData() {\r\n  const res = yield axios.get(\"http://dboi.info/api/categories\");\r\n  if (res.status === 200) {\r\n    const { data } = res.data;\r\n    yield put({ type: CATE_GET_SUCCESS, payload: data });\r\n  }\r\n}\r\n\r\nfunction* getListCate() {\r\n  yield takeLatest(CATE_GET_REQUEST, getData);\r\n}\r\n\r\n//DELETE\r\n\r\nfunction* getDatatoDelete(action) {\r\n  try{\r\n  var data = localStorage.getItem(\"LOGINADMIN\");\r\n  axios.defaults.headers.common['AUTH-TOKEN'] = data;\r\n  const { id } = action;\r\n  const res = yield axios.delete(`http://dboi.info/api/categories/${id}`);\r\n  if (res.status === 200) {\r\n    const { id } = action;\r\n    yield put({ type: CATE_DELETE_SUCCESS, payloadid: id });\r\n  }\r\n      \r\n}\r\ncatch (erro){\r\n  console.log(erro)\r\n}\r\n}\r\n\r\nfunction* getID() {\r\n  yield takeLatest(CATE_DELETE_REQUEST, getDatatoDelete);\r\n}\r\n\r\n//SUBMIT\r\n\r\nfunction* getDatatoSubmit({ cate }) {\r\n  var data = localStorage.getItem(\"LOGINADMIN\");\r\n  axios.defaults.headers.common['AUTH-TOKEN'] = data;\r\n  const res = yield axios.post(\"http://dboi.info/api/categories\", {\r\n    name: cate,\r\n  });\r\n  console.log(\"res\", res);\r\n  if (res.status === 200 && res.data.code === 200) {\r\n    const { data } = res.data;\r\n    console.log(data);\r\n    yield put({ type: CATE_SUBMIT_SUCCESS, payload: data }); //\r\n  }\r\n}\r\n\r\nfunction* getListSubmit() {\r\n  yield takeLatest(CATE_SUBMIT_REQUEST, getDatatoSubmit);\r\n}\r\n\r\n// GET_EDIT\r\n\r\nfunction* getDatatEdit({ id }) {\r\n  var data = localStorage.getItem(\"LOGINADMIN\");\r\n  axios.defaults.headers.common['AUTH-TOKEN'] = data;\r\n  const res = yield axios.get(`http://dboi.info/api/categories/${id}`);\r\n  if (res.status === 200 && res.data.code === 200) {\r\n    const { data } = res.data;\r\n    yield put({ type: CATE_GET_EDIT_SUCCESS, payload: data });\r\n  }\r\n}\r\n\r\nfunction* getDatatoEdit() {\r\n  yield takeLatest(CATE_GET_EDIT_REQUEST, getDatatEdit);\r\n}\r\n\r\n// UPDATE_EDIT\r\n\r\nfunction* getUpdate({ data }) {\r\n  try{\r\n    var dataAdmin = localStorage.getItem(\"LOGINADMIN\"); // \r\n    axios.defaults.headers.common['AUTH-TOKEN'] = dataAdmin;\r\n    const res = yield axios.put(`http://dboi.info/api/categories/${data.id}`, { name: data.name,});\r\n    if (res.status === 200 && res.data.code === 200) {\r\n      const { data } = res.data;\r\n      yield put({ type: CATE_UPDATE_EDIT_SUCCESS, payload: data });\r\n    }\r\n  }\r\n  catch(error)\r\n  {\r\n    if(error.response.status === 401)\r\n    {\r\n      localStorage.removeItem(\"ADMIN\")\r\n    }\r\n  }\r\n}\r\n\r\nfunction* getUpdateEdit() {\r\n  yield takeLatest(CATE_UPDATE_EDIT_REQUEST, getUpdate);\r\n}\r\n\r\nexport default function* () {\r\n  yield all([\r\n    getID(),\r\n    getListCate(), //getdata\r\n    getListSubmit(),\r\n    getDatatoEdit(),\r\n    getUpdateEdit(),\r\n  ]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}