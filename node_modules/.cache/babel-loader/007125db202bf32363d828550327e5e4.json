{"ast":null,"code":"import { ADD_PRODUCT_CART, DELETE_PRODUCT_CART, UPDATE_SOLUONG_CART } from \"../../types/cart\";\nvar data = JSON.parse(localStorage.getItem(\"CART\"));\nvar defaultState = data ? data : [];\n\nconst card = (state = defaultState, action) => {\n  var {\n    product,\n    soluong\n  } = action;\n  var index = -1;\n\n  switch (action.type) {\n    //thêm\n    case ADD_PRODUCT_CART:\n      index = findId(state, product.id);\n\n      if (index !== -1) {\n        state[index].soluong += soluong;\n      } else {\n        state.push({\n          product: product,\n          soluong: soluong\n        });\n      }\n\n      localStorage.setItem(\"CART\", JSON.stringify(state));\n      return [...state];\n    //delete\n\n    case DELETE_PRODUCT_CART:\n      index = findId(state, action.id);\n\n      if (index !== -1) {\n        state.splice(index, 1);\n      }\n\n      localStorage.setItem(\"CART\", JSON.stringify(state));\n      return [...state];\n    //update\n\n    case UPDATE_SOLUONG_CART:\n      index = findId(state, product.id);\n\n      if (index !== -1) {\n        state[index].soluong = soluong;\n      }\n\n      localStorage.setItem(\"CART\", JSON.stringify(state));\n      return [...state];\n\n    default:\n      return state;\n  }\n}; //\n\n\nvar findId = (card, products) => {\n  var index = -1;\n\n  for (var i = 0; i < card.length; i++) {\n    if (card[i].product.id === products) {\n      index = i;\n      break;\n    }\n  }\n\n  return index;\n};\n\nexport default card;","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/redux/reducer/cart/cart.js"],"names":["ADD_PRODUCT_CART","DELETE_PRODUCT_CART","UPDATE_SOLUONG_CART","data","JSON","parse","localStorage","getItem","defaultState","card","state","action","product","soluong","index","type","findId","id","push","setItem","stringify","splice","products","i","length"],"mappings":"AAAA,SACEA,gBADF,EAEEC,mBAFF,EAGEC,mBAHF,QAIO,kBAJP;AAMA,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AAEA,IAAIC,YAAY,GAAGL,IAAI,GAAGA,IAAH,GAAU,EAAjC;;AAEA,MAAMM,IAAI,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AAC7C,MAAI;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAuBF,MAA3B;AACA,MAAIG,KAAK,GAAG,CAAC,CAAb;;AACA,UAAQH,MAAM,CAACI,IAAf;AAEE;AACA,SAAKf,gBAAL;AACEc,MAAAA,KAAK,GAAGE,MAAM,CAACN,KAAD,EAAQE,OAAO,CAACK,EAAhB,CAAd;;AACA,UAAIH,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,OAAb,IAAwBA,OAAxB;AACD,OAFD,MAEO;AACLH,QAAAA,KAAK,CAACQ,IAAN,CAAW;AACTN,UAAAA,OAAO,EAAEA,OADA;AAETC,UAAAA,OAAO,EAAEA;AAFA,SAAX;AAID;;AACDP,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;AAEA;;AACF,SAAKT,mBAAL;AACEa,MAAAA,KAAK,GAAGE,MAAM,CAACN,KAAD,EAAQC,MAAM,CAACM,EAAf,CAAd;;AACA,UAAIH,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBJ,QAAAA,KAAK,CAACW,MAAN,CAAaP,KAAb,EAAoB,CAApB;AACD;;AACDR,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;AAEA;;AACF,SAAKR,mBAAL;AACEY,MAAAA,KAAK,GAAGE,MAAM,CAACN,KAAD,EAAQE,OAAO,CAACK,EAAhB,CAAd;;AACA,UAAIH,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,OAAb,GAAuBA,OAAvB;AACD;;AACDP,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACF;AACE,aAAOA,KAAP;AAlCJ;AAoCD,CAvCD,C,CA0CA;;;AACA,IAAIM,MAAM,GAAG,CAACP,IAAD,EAAOa,QAAP,KAAoB;AAC/B,MAAIR,KAAK,GAAG,CAAC,CAAb;;AACA,OAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,IAAI,CAACe,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,QAAId,IAAI,CAACc,CAAD,CAAJ,CAAQX,OAAR,CAAgBK,EAAhB,KAAuBK,QAA3B,EAAqC;AACnCR,MAAAA,KAAK,GAAGS,CAAR;AACA;AACD;AACF;;AACD,SAAOT,KAAP;AACD,CATD;;AAWA,eAAeL,IAAf","sourcesContent":["import {\r\n  ADD_PRODUCT_CART,\r\n  DELETE_PRODUCT_CART,\r\n  UPDATE_SOLUONG_CART,\r\n} from \"../../types/cart\";\r\n\r\nvar data = JSON.parse(localStorage.getItem(\"CART\"));\r\n\r\nvar defaultState = data ? data : [];\r\n\r\nconst card = (state = defaultState, action) => {\r\n  var { product, soluong } = action;\r\n  var index = -1;\r\n  switch (action.type) {\r\n\r\n    //thêm\r\n    case ADD_PRODUCT_CART:\r\n      index = findId(state, product.id);\r\n      if (index !== -1) {\r\n        state[index].soluong += soluong;\r\n      } else {\r\n        state.push({\r\n          product: product,\r\n          soluong: soluong,\r\n        });\r\n      }\r\n      localStorage.setItem(\"CART\", JSON.stringify(state)); \r\n      return [...state];\r\n\r\n      //delete\r\n    case DELETE_PRODUCT_CART:\r\n      index = findId(state, action.id);\r\n      if (index !== -1) {\r\n        state.splice(index, 1);\r\n      }\r\n      localStorage.setItem(\"CART\", JSON.stringify(state));\r\n      return [...state];\r\n\r\n      //update\r\n    case UPDATE_SOLUONG_CART:\r\n      index = findId(state, product.id);\r\n      if (index !== -1) {\r\n        state[index].soluong = soluong;\r\n      }\r\n      localStorage.setItem(\"CART\", JSON.stringify(state));\r\n      return [...state];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n\r\n//\r\nvar findId = (card, products) => {\r\n  var index = -1;\r\n  for (var i = 0; i < card.length; i++) {\r\n    if (card[i].product.id === products) {\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n  return index;\r\n};\r\n\r\nexport default card;\r\n"]},"metadata":{},"sourceType":"module"}