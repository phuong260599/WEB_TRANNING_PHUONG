{"ast":null,"code":"import { DELETE_PRODUCT_CART, UPDATE_SOLUONG_CART, GET_CART_ITEMS_SUCCESS, DELETE_CART_ITEMS_SUCCESS } from \"../../types/cart\";\nvar defaultState = {\n  data: []\n};\n\nconst card = (state = defaultState, action) => {\n  var {\n    product,\n    soluong\n  } = action;\n  var index = -1;\n\n  switch (action.type) {\n    case GET_CART_ITEMS_SUCCESS:\n      return { ...state,\n        data: action.payload.item\n      };\n    //thêm\n    // case ADD_PRODUCT_CART:\n    //   index = findId(state, product.id);\n    //   if (index !== -1) {\n    //     state[index].soluong += soluong;\n    //   } else {\n    //     state.push({\n    //       product: product,\n    //       soluong: soluong,\n    //     });\n    //   }\n    //   localStorage.setItem(\"CART\", JSON.stringify(state)); \n    //   return [...state];\n\n    case DELETE_CART_ITEMS_SUCCESS:\n      return { ...state,\n        data: state.data.filter(e => e.id !== action.payloadid)\n      };\n    //update\n\n    case UPDATE_SOLUONG_CART:\n      index = findId(state, product.id);\n\n      if (index !== -1) {\n        state[index].soluong = soluong;\n      }\n\n      localStorage.setItem(\"CART\", JSON.stringify(state));\n      return [...state];\n\n    default:\n      return state;\n  }\n}; //\n\n\nvar findId = (card, products) => {\n  var index = -1;\n\n  for (var i = 0; i < card.length; i++) {\n    if (card[i].id === products) {\n      index = i;\n      break;\n    }\n  }\n\n  return index;\n};\n\nexport default card;","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/redux/reducer/cart/cart.js"],"names":["DELETE_PRODUCT_CART","UPDATE_SOLUONG_CART","GET_CART_ITEMS_SUCCESS","DELETE_CART_ITEMS_SUCCESS","defaultState","data","card","state","action","product","soluong","index","type","payload","item","filter","e","id","payloadid","findId","localStorage","setItem","JSON","stringify","products","i","length"],"mappings":"AAAA,SACEA,mBADF,EAEEC,mBAFF,EAGEC,sBAHF,EAIEC,yBAJF,QAKO,kBALP;AAOA,IAAIC,YAAY,GAAG;AACjBC,EAAAA,IAAI,EAAE;AADW,CAAnB;;AAIA,MAAMC,IAAI,GAAG,CAACC,KAAK,GAAGH,YAAT,EAAuBI,MAAvB,KAAkC;AAC7C,MAAI;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAuBF,MAA3B;AACA,MAAIG,KAAK,GAAG,CAAC,CAAb;;AACA,UAAQH,MAAM,CAACI,IAAf;AAEE,SAAKV,sBAAL;AACE,aAAO,EACL,GAAGK,KADE;AAELF,QAAAA,IAAI,EAAEG,MAAM,CAACK,OAAP,CAAeC;AAFhB,OAAP;AAMF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAKX,yBAAL;AACE,aAAO,EACL,GAAGI,KADE;AAELF,QAAAA,IAAI,EAAEE,KAAK,CAACF,IAAN,CAAWU,MAAX,CAAmBC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAAST,MAAM,CAACU,SAAzC;AAFD,OAAP;AAKA;;AACF,SAAKjB,mBAAL;AACEU,MAAAA,KAAK,GAAGQ,MAAM,CAACZ,KAAD,EAAQE,OAAO,CAACQ,EAAhB,CAAd;;AACA,UAAIN,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChBJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,OAAb,GAAuBA,OAAvB;AACD;;AACDU,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAehB,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACF;AACE,aAAOA,KAAP;AAtCJ;AAwCD,CA3CD,C,CA8CA;;;AACA,IAAIY,MAAM,GAAG,CAACb,IAAD,EAAOkB,QAAP,KAAoB;AAC/B,MAAIb,KAAK,GAAG,CAAC,CAAb;;AACA,OAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnB,IAAI,CAACoB,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpC,QAAInB,IAAI,CAACmB,CAAD,CAAJ,CAAQR,EAAR,KAAeO,QAAnB,EAA6B;AAC3Bb,MAAAA,KAAK,GAAGc,CAAR;AACA;AACD;AACF;;AACD,SAAOd,KAAP;AACD,CATD;;AAWA,eAAeL,IAAf","sourcesContent":["import {\r\n  DELETE_PRODUCT_CART,\r\n  UPDATE_SOLUONG_CART,\r\n  GET_CART_ITEMS_SUCCESS,\r\n  DELETE_CART_ITEMS_SUCCESS,\r\n} from \"../../types/cart\";\r\n\r\nvar defaultState = {\r\n  data: []\r\n};\r\n\r\nconst card = (state = defaultState, action) => {\r\n  var { product, soluong } = action;\r\n  var index = -1;\r\n  switch (action.type) {\r\n\r\n    case GET_CART_ITEMS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        data: action.payload.item\r\n      }\r\n      \r\n\r\n    //thêm\r\n    // case ADD_PRODUCT_CART:\r\n    //   index = findId(state, product.id);\r\n    //   if (index !== -1) {\r\n    //     state[index].soluong += soluong;\r\n    //   } else {\r\n    //     state.push({\r\n    //       product: product,\r\n    //       soluong: soluong,\r\n    //     });\r\n    //   }\r\n    //   localStorage.setItem(\"CART\", JSON.stringify(state)); \r\n    //   return [...state];\r\n\r\n    case DELETE_CART_ITEMS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        data: state.data.filter((e) => e.id !== action.payloadid),\r\n      };\r\n\r\n      //update\r\n    case UPDATE_SOLUONG_CART:\r\n      index = findId(state, product.id);\r\n      if (index !== -1) {\r\n        state[index].soluong = soluong;\r\n      }\r\n      localStorage.setItem(\"CART\", JSON.stringify(state));\r\n      return [...state];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n\r\n//\r\nvar findId = (card, products) => {\r\n  var index = -1;\r\n  for (var i = 0; i < card.length; i++) {\r\n    if (card[i].id === products) {\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n  return index;\r\n};\r\n\r\nexport default card;\r\n"]},"metadata":{},"sourceType":"module"}