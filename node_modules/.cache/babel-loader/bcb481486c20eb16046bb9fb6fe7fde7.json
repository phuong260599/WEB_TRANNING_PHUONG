{"ast":null,"code":"import { takeLatest, put, all } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { toast } from 'react-toastify';\nimport { LOGIN_MEMBER_SUCCESS, LOGIN_MEMBER_REQUEST } from \"../types/loginMember\";\n\nfunction* loginMember({\n  email,\n  password\n}) {\n  const notifysucess = () => toast.info(\"Đăng nhập thành công\", {\n    position: \"top-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined\n  });\n\n  const notifyfaile = () => toast.info(\"Sai tên đăng nhập hoặc mật khẩu\", {\n    position: \"top-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined\n  });\n\n  console.log(email, password);\n\n  try {\n    const res = yield axios.post(\"http://dboi.info/api/sign_in\", {\n      email: email,\n      password: password\n    });\n    console.log(res);\n\n    if (res.data.data.user.role === \"customer\") {\n      const {\n        data\n      } = res.data;\n      yield put({\n        type: LOGIN_MEMBER_SUCCESS,\n        payload: data\n      });\n      notifysucess();\n    } else {}\n  } catch (error) {\n    notifyfaile();\n  }\n}\n\nfunction* loginMemberRequest() {\n  yield takeLatest(LOGIN_MEMBER_REQUEST, loginMember);\n} // //DELETE\n// function* getDatatoDelete(action) {\n//   try{\n//   var data = localStorage.getItem(\"LOGINADMIN\");\n//   axios.defaults.headers.common['AUTH-TOKEN'] = data;\n//   const { id } = action;\n//   const res = yield axios.delete(`http://dboi.info/api/categories/${id}`);\n//   if (res.status === 200) {\n//     const { id } = action;\n//     yield put({ type: CATE_DELETE_SUCCESS, payloadid: id });\n//   }\n// }\n// catch (erro){\n//   console.log(erro)\n// }\n// }\n// function* getID() {\n//   yield takeLatest(CATE_DELETE_REQUEST, getDatatoDelete);\n// }\n// //SUBMIT\n// function* getDatatoSubmit({ cate }) {\n//   var data = localStorage.getItem(\"LOGINADMIN\");\n//   axios.defaults.headers.common['AUTH-TOKEN'] = data;\n//   const res = yield axios.post(\"http://dboi.info/api/categories\", {\n//     name: cate,\n//   });\n//   console.log(\"res\", res);\n//   if (res.status === 200 && res.data.code === 200) {\n//     const { data } = res.data;\n//     console.log(data);\n//     yield put({ type: CATE_SUBMIT_SUCCESS, payload: data }); //\n//   }\n// }\n// function* getListSubmit() {\n//   yield takeLatest(CATE_SUBMIT_REQUEST, getDatatoSubmit);\n// }\n// // GET_EDIT\n// function* getDatatEdit({ id }) {\n//   var data = localStorage.getItem(\"LOGINADMIN\");\n//   axios.defaults.headers.common['AUTH-TOKEN'] = data;\n//   const res = yield axios.get(`http://dboi.info/api/categories/${id}`);\n//   if (res.status === 200 && res.data.code === 200) {\n//     const { data } = res.data;\n//     yield put({ type: CATE_GET_EDIT_SUCCESS, payload: data });\n//   }\n// }\n// function* getDatatoEdit() {\n//   yield takeLatest(CATE_GET_EDIT_REQUEST, getDatatEdit);\n// }\n// // UPDATE_EDIT\n// function* getUpdate({ data }) {\n//   try{\n//     var dataAdmin = localStorage.getItem(\"LOGINADMIN\"); // \n//     axios.defaults.headers.common['AUTH-TOKEN'] = dataAdmin;\n//     const res = yield axios.put(`http://dboi.info/api/categories/${data.id}`, { name: data.name,});\n//     if (res.status === 200 && res.data.code === 200) {\n//       const { data } = res.data;\n//       yield put({ type: CATE_UPDATE_EDIT_SUCCESS, payload: data });\n//     }\n//   }\n//   catch(error)\n//   {\n//     console.log(error.response.status)\n//     if(error.response.status === 401)\n//     {\n//       yield put({ type: LOGOUT_ADMIN});\n//       localStorage.removeItem(\"LOGINADMIN\")\n//     }\n//   }\n// }\n// function* getUpdateEdit() {\n//   yield takeLatest(CATE_UPDATE_EDIT_REQUEST, getUpdate);\n// }\n\n\nexport default function* () {\n  yield all([loginMemberRequest() // getListCate(), //getdata\n  // getListSubmit(),\n  // getDatatoEdit(),\n  // getUpdateEdit(),\n  ]);\n}","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/redux/sagas/loginMember.js"],"names":["takeLatest","put","all","axios","toast","LOGIN_MEMBER_SUCCESS","LOGIN_MEMBER_REQUEST","loginMember","email","password","notifysucess","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","notifyfaile","console","log","res","post","data","user","role","type","payload","error","loginMemberRequest"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,GAA1B,QAAqC,oBAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,oBAAT,EAA+BC,oBAA/B,QAA2D,sBAA3D;;AAEA,UAAUC,WAAV,CAAsB;AAACC,EAAAA,KAAD;AAAOC,EAAAA;AAAP,CAAtB,EAAwC;AACtC,QAAMC,YAAY,GAAG,MAAMN,KAAK,CAACO,IAAN,CACzB,sBADyB,EACF;AACvBC,IAAAA,QAAQ,EAAE,WADa;AAEvBC,IAAAA,SAAS,EAAE,IAFY;AAGvBC,IAAAA,eAAe,EAAE,KAHM;AAIvBC,IAAAA,YAAY,EAAE,IAJS;AAKvBC,IAAAA,YAAY,EAAE,IALS;AAMvBC,IAAAA,SAAS,EAAE,IANY;AAOvBC,IAAAA,QAAQ,EAAEC;AAPa,GADE,CAA3B;;AAUA,QAAMC,WAAW,GAAG,MAAMhB,KAAK,CAACO,IAAN,CACxB,iCADwB,EACU;AAClCC,IAAAA,QAAQ,EAAE,WADwB;AAElCC,IAAAA,SAAS,EAAE,IAFuB;AAGlCC,IAAAA,eAAe,EAAE,KAHiB;AAIlCC,IAAAA,YAAY,EAAE,IAJoB;AAKlCC,IAAAA,YAAY,EAAE,IALoB;AAMlCC,IAAAA,SAAS,EAAE,IANuB;AAOlCC,IAAAA,QAAQ,EAAEC;AAPwB,GADV,CAA1B;;AAUEE,EAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ,EAAkBC,QAAlB;;AACA,MAAG;AACD,UAAMc,GAAG,GAAG,MAAMpB,KAAK,CAACqB,IAAN,CAAW,8BAAX,EAA2C;AAAEhB,MAAAA,KAAK,EAAEA,KAAT;AAAgBC,MAAAA,QAAQ,EAAEA;AAA1B,KAA3C,CAAlB;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;;AACE,QAAIA,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcC,IAAd,CAAmBC,IAAnB,KAA4B,UAAhC,EAA4C;AAC1C,YAAM;AAAEF,QAAAA;AAAF,UAAWF,GAAG,CAACE,IAArB;AACA,YAAMxB,GAAG,CAAC;AAAE2B,QAAAA,IAAI,EAAEvB,oBAAR;AAA8BwB,QAAAA,OAAO,EAAEJ;AAAvC,OAAD,CAAT;AACAf,MAAAA,YAAY;AACb,KAJD,MAIO,CAEN;AACJ,GAVD,CAWA,OAAMoB,KAAN,EAAY;AACVV,IAAAA,WAAW;AACZ;AAEJ;;AAED,UAAUW,kBAAV,GAA+B;AAC7B,QAAM/B,UAAU,CAACM,oBAAD,EAAuBC,WAAvB,CAAhB;AACD,C,CAED;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAEA,eAAe,aAAa;AAC1B,QAAML,GAAG,CAAC,CACR6B,kBAAkB,EADV,CAER;AACA;AACA;AACA;AALQ,GAAD,CAAT;AAOD","sourcesContent":["import { takeLatest, put, all } from \"redux-saga/effects\";\r\nimport axios from \"axios\";\r\nimport { toast } from 'react-toastify';\r\nimport { LOGIN_MEMBER_SUCCESS, LOGIN_MEMBER_REQUEST } from \"../types/loginMember\";\r\n\r\nfunction* loginMember({email,password}) {\r\n  const notifysucess = () => toast.info(\r\n    \"Đăng nhập thành công\",{\r\n    position: \"top-right\",\r\n    autoClose: 3000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n    });\r\n  const notifyfaile = () => toast.info(\r\n    \"Sai tên đăng nhập hoặc mật khẩu\",{\r\n    position: \"top-right\",\r\n    autoClose: 3000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n    });\r\n    console.log(email,password)\r\n    try{\r\n      const res = yield axios.post(\"http://dboi.info/api/sign_in\", { email: email, password: password });\r\n      console.log(res)\r\n        if (res.data.data.user.role === \"customer\") {\r\n          const { data } = res.data;\r\n          yield put({ type: LOGIN_MEMBER_SUCCESS, payload: data});\r\n          notifysucess()\r\n        } else {\r\n          \r\n        }\r\n    }\r\n    catch(error){\r\n      notifyfaile()\r\n    }\r\n \r\n}\r\n\r\nfunction* loginMemberRequest() {\r\n  yield takeLatest(LOGIN_MEMBER_REQUEST, loginMember);\r\n}\r\n\r\n// //DELETE\r\n\r\n// function* getDatatoDelete(action) {\r\n//   try{\r\n//   var data = localStorage.getItem(\"LOGINADMIN\");\r\n//   axios.defaults.headers.common['AUTH-TOKEN'] = data;\r\n//   const { id } = action;\r\n//   const res = yield axios.delete(`http://dboi.info/api/categories/${id}`);\r\n//   if (res.status === 200) {\r\n//     const { id } = action;\r\n//     yield put({ type: CATE_DELETE_SUCCESS, payloadid: id });\r\n//   }\r\n      \r\n// }\r\n// catch (erro){\r\n//   console.log(erro)\r\n// }\r\n// }\r\n\r\n// function* getID() {\r\n//   yield takeLatest(CATE_DELETE_REQUEST, getDatatoDelete);\r\n// }\r\n\r\n// //SUBMIT\r\n\r\n// function* getDatatoSubmit({ cate }) {\r\n//   var data = localStorage.getItem(\"LOGINADMIN\");\r\n//   axios.defaults.headers.common['AUTH-TOKEN'] = data;\r\n//   const res = yield axios.post(\"http://dboi.info/api/categories\", {\r\n//     name: cate,\r\n//   });\r\n//   console.log(\"res\", res);\r\n//   if (res.status === 200 && res.data.code === 200) {\r\n//     const { data } = res.data;\r\n//     console.log(data);\r\n//     yield put({ type: CATE_SUBMIT_SUCCESS, payload: data }); //\r\n//   }\r\n// }\r\n\r\n// function* getListSubmit() {\r\n//   yield takeLatest(CATE_SUBMIT_REQUEST, getDatatoSubmit);\r\n// }\r\n\r\n// // GET_EDIT\r\n\r\n// function* getDatatEdit({ id }) {\r\n//   var data = localStorage.getItem(\"LOGINADMIN\");\r\n//   axios.defaults.headers.common['AUTH-TOKEN'] = data;\r\n//   const res = yield axios.get(`http://dboi.info/api/categories/${id}`);\r\n//   if (res.status === 200 && res.data.code === 200) {\r\n//     const { data } = res.data;\r\n//     yield put({ type: CATE_GET_EDIT_SUCCESS, payload: data });\r\n//   }\r\n// }\r\n\r\n// function* getDatatoEdit() {\r\n//   yield takeLatest(CATE_GET_EDIT_REQUEST, getDatatEdit);\r\n// }\r\n\r\n// // UPDATE_EDIT\r\n\r\n// function* getUpdate({ data }) {\r\n//   try{\r\n//     var dataAdmin = localStorage.getItem(\"LOGINADMIN\"); // \r\n//     axios.defaults.headers.common['AUTH-TOKEN'] = dataAdmin;\r\n//     const res = yield axios.put(`http://dboi.info/api/categories/${data.id}`, { name: data.name,});\r\n//     if (res.status === 200 && res.data.code === 200) {\r\n//       const { data } = res.data;\r\n//       yield put({ type: CATE_UPDATE_EDIT_SUCCESS, payload: data });\r\n//     }\r\n//   }\r\n//   catch(error)\r\n//   {\r\n//     console.log(error.response.status)\r\n//     if(error.response.status === 401)\r\n//     {\r\n//       yield put({ type: LOGOUT_ADMIN});\r\n//       localStorage.removeItem(\"LOGINADMIN\")\r\n//     }\r\n//   }\r\n// }\r\n\r\n// function* getUpdateEdit() {\r\n//   yield takeLatest(CATE_UPDATE_EDIT_REQUEST, getUpdate);\r\n// }\r\n\r\nexport default function* () {\r\n  yield all([\r\n    loginMemberRequest(),\r\n    // getListCate(), //getdata\r\n    // getListSubmit(),\r\n    // getDatatoEdit(),\r\n    // getUpdateEdit(),\r\n  ]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}