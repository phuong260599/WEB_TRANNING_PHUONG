{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Phuong\\\\Desktop\\\\Web_thuc_tap\\\\src\\\\containers\\\\admin\\\\AdminUi\\\\layout\\\\quanlysanpham\\\\Form.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass QuanlysanphamADD extends Component {\n  constructor(props) {\n    super(props);\n\n    this._onChangeText = e => {\n      var target = e.target;\n      var name = target.name;\n      var value = target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this._onChangeImage = e => {\n      this.setState({\n        images: e.target.files[0]\n      });\n    };\n\n    this.validate = () => {\n      let priceErro = \"\";\n\n      if (this.state.txtprice < 0) {\n        priceErro = \"Giá nhập không hợp lệ\";\n      }\n\n      if (priceErro) {\n        this.setState({\n          txtpriceErro: priceErro\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.notify = () => toast.info(\"Thêm thành công\", {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n\n    this._onCreate = e => {\n      e.preventDefault();\n      let validate = this.validate();\n\n      if (validate) {\n        const data = new FormData();\n        data.append(\"id\", this.state.id);\n        data.append(\"name\", this.state.txtname);\n        data.append(\"price\", this.state.txtprice);\n        data.append(\"user_id\", 1);\n        data.append(\"category_id\", this.state.txtselect);\n\n        if (this.state.images) {\n          data.append(\"avatar\", this.state.images);\n        }\n\n        if (this.state.id) {\n          this.props.upDateProduct({\n            data,\n            id: this.state.id\n          });\n        } else {\n          this.notify();\n          this.props.getDatatoSubmit(data);\n        }\n\n        this.props.history.goBack();\n      }\n    };\n\n    this.state = {\n      id: \"\",\n      txtname: \"\",\n      txtprice: \"\",\n      txtselect: \"Categories\",\n      images: \"\",\n      imagesEdit: \"\",\n      txtpriceErro: \"\"\n    };\n  }\n\n  render() {\n    const {\n      imagesEdit\n    } = this.state;\n    const {\n      dataCate\n    } = this.props;\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          justifyContent: \"center\",\n          paddingTop: \"50px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h3\", {\n        style: {\n          textAlign: \"center\",\n          color: \"green\",\n          paddingBottom: \"20px\",\n          fontWeight: \"bold\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }\n      }, \"FORM ADD AND EDIT\"),\n      /*#__PURE__*/\n      React.createElement(\"form\", {\n        onSubmit: this._onCreate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        className: \"my-1 mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, \"Category\"),\n      /*#__PURE__*/\n      React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.txtselect,\n        name: \"txtselect\",\n        onChange: this._onChangeText,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 19\n        }\n      }, \"Categories\"), dataCate.map((e, index) => {\n        return (\n          /*#__PURE__*/\n          React.createElement(\"option\", {\n            key: index,\n            value: e.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 23\n            }\n          }, e.name)\n        );\n      })),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"row mt-5\",\n        style: {\n          justifyContent: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }, \"H\\xECnh \\u1EA3nh\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"custom-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"file\",\n        className: \"custom-file-input\",\n        accept: \".jpg,.png\",\n        onChange: this._onChangeImage,\n        required: !imagesEdit ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 23\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        style: {\n          display: \"inline-block\",\n          cursor: \"pointer\",\n          content: \"click me\"\n        },\n        className: \"custom-file-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 23\n        }\n      }, \"Choose file...\"))),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"img\", {\n        style: {\n          height: \"64px\",\n          width: \"60px\"\n        },\n        src: \"http://dboi.info\" + this.state.imagesEdit,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }\n      }))),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"form-row mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-6 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }, \"T\\xEAn\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        name: \"txtname\",\n        value: this.state.txtname,\n        onChange: this._onChangeText,\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Name\",\n        style: {\n          borderColor: \"black\"\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-6 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }\n      }, \"Gi\\xE1\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        name: \"txtprice\",\n        className: \"form-control\",\n        onChange: this._onChangeText,\n        type: \"number\",\n        placeholder: \"Price\",\n        value: this.state.txtprice,\n        style: {\n          borderColor: \"black\"\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }\n      }), this.state.txtpriceErro ?\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        style: {\n          color: \"red\",\n          fontWeight: 600\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 23\n        }\n      }, this.state.txtpriceErro) : null)),\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        className: \"btn\",\n        type: \"submit\",\n        style: {\n          background: \"green\",\n          color: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 17\n        }\n      }, \"Th\\xEAm\"),\n      /*#__PURE__*/\n      React.createElement(Link, {\n        to: \"/admin/quanlysanpham\",\n        className: \"btn  ml-3\",\n        style: {\n          background: \"orange\",\n          color: \"white\",\n          borderColor: \"orange\"\n        },\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, \"Tr\\u1EDF v\\u1EC1\"))))))\n    );\n  }\n\n  componentDidMount() {\n    var {\n      match\n    } = this.props;\n    var id = match.params.id;\n\n    if (match) {\n      this.props.getEditData(id);\n    }\n\n    this.props.getData();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextprops) {\n    if (nextprops && nextprops.dataEdit) {\n      var {\n        dataEdit\n      } = nextprops;\n      this.setState({\n        id: dataEdit.id,\n        txtname: dataEdit.name,\n        txtprice: dataEdit.price,\n        txtcontant: dataEdit.content,\n        txtselect: dataEdit.category_id,\n        imagesEdit: dataEdit.avatar.url\n      });\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    dataCate: state.categories.data,\n    dataEdit: state.cateEdit.data\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getDatatoSubmit: cate => dispatch({\n      type: \"PRODUCT_SUBMIT_REQUEST\",\n      cate: cate\n    }),\n    getData: () => dispatch({\n      type: \"CATE_GET_REQUEST\"\n    }),\n    getEditData: id => dispatch({\n      type: \"PRODUCT_GET_EDIT_DATA_REQUEST\",\n      id: id\n    }),\n    upDateProduct: ({\n      data,\n      id\n    }) => dispatch({\n      type: \"PRODUCT_UPDATE_EDIT_DATA_REQUEST\",\n      data: data,\n      id: id\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuanlysanphamADD);","map":{"version":3,"sources":["C:/Users/Phuong/Desktop/Web_thuc_tap/src/containers/admin/AdminUi/layout/quanlysanpham/Form.js"],"names":["React","Component","Link","connect","toast","QuanlysanphamADD","constructor","props","_onChangeText","e","target","name","value","setState","_onChangeImage","images","files","validate","priceErro","state","txtprice","txtpriceErro","notify","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","_onCreate","preventDefault","data","FormData","append","id","txtname","txtselect","upDateProduct","getDatatoSubmit","history","goBack","imagesEdit","render","dataCate","justifyContent","paddingTop","textAlign","color","paddingBottom","fontWeight","map","index","display","cursor","content","height","width","borderColor","background","componentDidMount","match","params","getEditData","getData","UNSAFE_componentWillReceiveProps","nextprops","dataEdit","price","txtcontant","category_id","avatar","url","mapStateToProps","categories","cateEdit","mapDispatchToProps","dispatch","cate","type"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass QuanlysanphamADD extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      txtname: \"\",\n      txtprice: \"\",\n      txtselect: \"Categories\",\n      images: \"\",\n      imagesEdit: \"\",\n      txtpriceErro: \"\",\n    };\n  }\n\n  _onChangeText = (e) => {\n    var target = e.target;\n    var name = target.name;\n    var value = target.value;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  _onChangeImage = (e) => {\n    this.setState({\n      images: e.target.files[0],\n    });\n  };\n\n  validate = () => {\n    let priceErro = \"\";\n    if (this.state.txtprice < 0) {\n      priceErro = \"Giá nhập không hợp lệ\";\n    }\n\n    if (priceErro) {\n      this.setState({ txtpriceErro: priceErro });\n      return false;\n    }\n\n    return true;\n  };\n\n  notify = () => toast.info(\"Thêm thành công\",{\n    position: \"top-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined,\n    });\n\n  _onCreate = (e) => {\n    e.preventDefault();\n    let validate = this.validate();\n    if (validate) {\n      const data = new FormData();\n      data.append(\"id\", this.state.id);\n      data.append(\"name\", this.state.txtname);\n      data.append(\"price\", this.state.txtprice);\n      data.append(\"user_id\", 1);\n      data.append(\"category_id\", this.state.txtselect);\n      if (this.state.images) {\n        data.append(\"avatar\", this.state.images);\n      }\n      \n      if (this.state.id) {\n        this.props.upDateProduct({ data, id: this.state.id });\n      } else {\n        this.notify()\n        this.props.getDatatoSubmit(data);\n      }\n      this.props.history.goBack();\n    }\n  };\n\n  render() {\n    const { imagesEdit } = this.state;\n    const { dataCate } = this.props;\n    \n    return (\n      <div\n        className=\"row\"\n        style={{ justifyContent: \"center\", paddingTop: \"50px\" }}\n      >\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h3\n                style={{\n                  textAlign: \"center\",\n                  color: \"green\",\n                  paddingBottom: \"20px\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                FORM ADD AND EDIT\n              </h3>\n              <form onSubmit={this._onCreate}>\n                <label className=\"my-1 mr-2\">Category</label>\n                <select\n                  className=\"form-control\"\n                  value={this.state.txtselect}\n                  name=\"txtselect\"\n                  onChange={this._onChangeText}\n                  required\n                >\n                  <option value=\"\">Categories</option>\n                  {dataCate.map((e, index) => {\n                    return (\n                      <option key={index} value={e.id}>\n                        {e.name}\n                      </option>\n                    );\n                  })}\n                </select>\n                <div className=\"row mt-5\" style={{ justifyContent: \"center\" }}>\n                  <div className=\"col-md-5\">\n                    <label>Hình ảnh</label>\n                    <div className=\"custom-file\">\n                      <input\n                        type=\"file\"\n                        className=\"custom-file-input\"\n                        accept=\".jpg,.png\"\n                        onChange={this._onChangeImage}\n                        required={!imagesEdit ? true : false}\n                      />\n                      <label\n                        style={{\n                          display: \"inline-block\",\n                          cursor: \"pointer\",\n                          content: \"click me\",\n                        }}\n                        className=\"custom-file-label\"\n                      >\n                        Choose file...\n                      </label>\n                    </div>\n                  </div>\n                  <div className=\"col-md-2\">\n                    <img\n                      style={{ height: \"64px\", width: \"60px\" }}\n                      src={\"http://dboi.info\" + this.state.imagesEdit}\n                      alt=\"\"\n                    />\n                  </div>\n                </div>\n                <div className=\"form-row mt-3\">\n                  <div className=\"col-md-6 mb-3\">\n                    <label>Tên</label>\n                    <input\n                      name=\"txtname\"\n                      value={this.state.txtname}\n                      onChange={this._onChangeText}\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Name\"\n                      style={{ borderColor: \"black\" }}\n                      required\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label>Giá</label>\n                    <input\n                      name=\"txtprice\"\n                      className=\"form-control\"\n                      onChange={this._onChangeText}\n                      type=\"number\"\n                      placeholder=\"Price\"\n                      value={this.state.txtprice}\n                      style={{ borderColor: \"black\" }}\n                      required\n                    />\n                    {this.state.txtpriceErro ? (\n                      <div style={{ color: \"red\", fontWeight: 600 }}>\n                        {this.state.txtpriceErro}\n                      </div>\n                    ) : null}\n                  </div>\n                </div>\n                <button\n                  className=\"btn\"\n                  type=\"submit\"\n                  style={{ background: \"green\", color: \"white\" }}\n                >\n                  Thêm\n                </button>\n                <Link\n                  to=\"/admin/quanlysanpham\"\n                  className=\"btn  ml-3\"\n                  style={{\n                    background: \"orange\",\n                    color: \"white\",\n                    borderColor: \"orange\",\n                  }}\n                  type=\"submit\"\n                >\n                  Trở về\n                </Link>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  componentDidMount() {\n    var { match } = this.props;\n    var id = match.params.id;\n    if (match) {\n      this.props.getEditData(id);\n    }\n    this.props.getData();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextprops) {\n    if (nextprops && nextprops.dataEdit) {\n      var { dataEdit } = nextprops;\n      this.setState({\n        id: dataEdit.id,\n        txtname: dataEdit.name,\n        txtprice: dataEdit.price,\n        txtcontant: dataEdit.content,\n        txtselect: dataEdit.category_id,\n        imagesEdit: dataEdit.avatar.url,\n      });\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    dataCate: state.categories.data,\n    dataEdit: state.cateEdit.data,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getDatatoSubmit: (cate) => dispatch({ type: \"PRODUCT_SUBMIT_REQUEST\", cate: cate }),\n    getData: () => dispatch({ type: \"CATE_GET_REQUEST\" }),\n    getEditData: (id) =>\n      dispatch({ type: \"PRODUCT_GET_EDIT_DATA_REQUEST\", id: id }),\n    upDateProduct: ({ data, id }) =>\n      dispatch({\n        type: \"PRODUCT_UPDATE_EDIT_DATA_REQUEST\",\n        data: data,\n        id: id,\n      }),\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(QuanlysanphamADD);\n"]},"metadata":{},"sourceType":"module"}