{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Phuong\\\\Downloads\\\\Web_thuc_tap\\\\Web_thuc_tap\\\\src\\\\containers\\\\admin\\\\AdminUi\\\\layout\\\\quanlysanpham\\\\Form.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass QuanlysanphamADD extends Component {\n  constructor(props) {\n    super(props);\n\n    this._onChangeText = e => {\n      var target = e.target;\n      var name = target.name;\n      var value = target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this._onChangeImage = e => {\n      this.setState({\n        images: e.target.files[0]\n      });\n    };\n\n    this.validate = () => {\n      let priceErro = \"\";\n\n      if (this.state.txtprice < 0) {\n        priceErro = \"Giá nhập không hợp lệ\";\n      }\n\n      if (priceErro) {\n        this.setState({\n          txtpriceErro: priceErro\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this._onCreate = e => {\n      e.preventDefault();\n      let validate = this.validate();\n\n      if (validate) {\n        const data = new FormData();\n        data.append(\"id\", this.state.id);\n        data.append(\"name\", this.state.txtname);\n        data.append(\"price\", this.state.txtprice);\n        data.append(\"content\", this.state.txtcontant);\n        data.append(\"user_id\", 1);\n        data.append(\"category_id\", this.state.txtselect);\n\n        if (this.state.images) {\n          data.append(\"avatar\", this.state.images);\n        }\n\n        if (this.state.id) {\n          this.props.upDateProduct({\n            data,\n            id: this.state.id\n          });\n        } else {\n          this.thongBao();\n          this.props.getDatatoSubmit(data);\n        }\n\n        this.props.history.goBack();\n      }\n    };\n\n    this.state = {\n      id: \"\",\n      txtname: \"\",\n      txtprice: \"\",\n      txtcontant: \"\",\n      txtselect: \"Categories\",\n      images: \"\",\n      imagesEdit: \"\",\n      txtpriceErro: \"\"\n    };\n  }\n\n  render() {\n    const {\n      imagesEdit\n    } = this.state;\n    const {\n      dataCate\n    } = this.props;\n\n    const notify = () => toast(\"Wow so easy !\", {\n      position: \"top-right\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined\n    });\n\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          justifyContent: \"center\",\n          paddingTop: \"50px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(ToastContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"h3\", {\n        style: {\n          textAlign: \"center\",\n          color: \"green\",\n          paddingBottom: \"20px\",\n          fontWeight: \"bold\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }\n      }, \"FORM ADD AND EDIT\"),\n      /*#__PURE__*/\n      React.createElement(\"form\", {\n        onSubmit: this._onCreate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        className: \"my-1 mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, \"Category\"),\n      /*#__PURE__*/\n      React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.txtselect,\n        name: \"txtselect\",\n        onChange: this._onChangeText,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }\n      }, \"Categories\"), dataCate.map((e, index) => {\n        return (\n          /*#__PURE__*/\n          React.createElement(\"option\", {\n            key: index,\n            value: e.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 23\n            }\n          }, e.name)\n        );\n      })),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"row mt-5\",\n        style: {\n          justifyContent: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, \"H\\xECnh \\u1EA3nh\"),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"custom-file\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        type: \"file\",\n        className: \"custom-file-input\",\n        accept: \".jpg,.png\",\n        onChange: this._onChangeImage,\n        required: !imagesEdit ? true : false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 23\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        style: {\n          display: \"inline-block\",\n          cursor: \"pointer\",\n          content: \"click me\"\n        },\n        className: \"custom-file-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }\n      }, \"Choose file...\"))),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"img\", {\n        style: {\n          height: \"64px\",\n          width: \"60px\"\n        },\n        src: \"http://dboi.info\" + this.state.imagesEdit,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }\n      }))),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"form-row mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-4 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }\n      }, \"T\\xEAn\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        name: \"txtname\",\n        value: this.state.txtname,\n        onChange: this._onChangeText,\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Name\",\n        style: {\n          borderColor: \"black\"\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-4 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }\n      }, \"Gi\\xE1\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        name: \"txtprice\",\n        className: \"form-control\",\n        onChange: this._onChangeText,\n        type: \"number\",\n        placeholder: \"Price\",\n        value: this.state.txtprice,\n        style: {\n          borderColor: \"black\"\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }\n      }), this.state.txtpriceErro ?\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        style: {\n          color: \"red\",\n          fontWeight: 600\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 23\n        }\n      }, this.state.txtpriceErro) : null),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"col-md-4 mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 19\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 23\n        }\n      }, \"Chi ti\\u1EBFt\"),\n      /*#__PURE__*/\n      React.createElement(\"input\", {\n        name: \"txtcontant\",\n        className: \"form-control\",\n        value: this.state.txtcontant,\n        onChange: this._onChangeText,\n        type: \"text\",\n        placeholder: \"Contant\",\n        style: {\n          borderColor: \"black\"\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 23\n        }\n      })))),\n      /*#__PURE__*/\n      React.createElement(\"button\", {\n        className: \"btn\",\n        type: \"submit\",\n        style: {\n          background: \"green\",\n          color: \"white\"\n        },\n        onClick: notify,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }\n      }, \"Th\\xEAm\"),\n      /*#__PURE__*/\n      React.createElement(Link, {\n        to: \"/admin/quanlysanpham\",\n        className: \"btn  ml-3\",\n        style: {\n          background: \"orange\",\n          color: \"white\",\n          borderColor: \"orange\"\n        },\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 17\n        }\n      }, \"Tr\\u1EDF v\\u1EC1\"))))))\n    );\n  }\n\n  componentDidMount() {\n    var {\n      match\n    } = this.props;\n    var id = match.params.id;\n\n    if (match) {\n      this.props.getEditData(id);\n    }\n\n    this.props.getData();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextprops) {\n    if (nextprops && nextprops.dataEdit) {\n      var {\n        dataEdit\n      } = nextprops;\n      this.setState({\n        id: dataEdit.id,\n        txtname: dataEdit.name,\n        txtprice: dataEdit.price,\n        txtcontant: dataEdit.content,\n        txtselect: dataEdit.category_id,\n        imagesEdit: dataEdit.avatar.url\n      });\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    dataCate: state.categories.data,\n    dataEdit: state.cateEdit.data\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getDatatoSubmit: cate => dispatch({\n      type: \"PRODUCT_SUBMIT_REQUEST\",\n      cate: cate\n    }),\n    getData: () => dispatch({\n      type: \"CATE_GET_REQUEST\"\n    }),\n    getEditData: id => dispatch({\n      type: \"PRODUCT_GET_EDIT_DATA_REQUEST\",\n      id: id\n    }),\n    upDateProduct: ({\n      data,\n      id\n    }) => dispatch({\n      type: \"PRODUCT_UPDATE_EDIT_DATA_REQUEST\",\n      data: data,\n      id: id\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuanlysanphamADD);","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/containers/admin/AdminUi/layout/quanlysanpham/Form.js"],"names":["React","Component","Link","connect","ToastContainer","toast","QuanlysanphamADD","constructor","props","_onChangeText","e","target","name","value","setState","_onChangeImage","images","files","validate","priceErro","state","txtprice","txtpriceErro","_onCreate","preventDefault","data","FormData","append","id","txtname","txtcontant","txtselect","upDateProduct","thongBao","getDatatoSubmit","history","goBack","imagesEdit","render","dataCate","notify","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","justifyContent","paddingTop","textAlign","color","paddingBottom","fontWeight","map","index","display","cursor","content","height","width","borderColor","background","componentDidMount","match","params","getEditData","getData","UNSAFE_componentWillReceiveProps","nextprops","dataEdit","price","category_id","avatar","url","mapStateToProps","categories","cateEdit","mapDispatchToProps","dispatch","cate","type"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass QuanlysanphamADD extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      txtname: \"\",\n      txtprice: \"\",\n      txtcontant: \"\",\n      txtselect: \"Categories\",\n      images: \"\",\n      imagesEdit: \"\",\n      txtpriceErro: \"\",\n    };\n  }\n\n  _onChangeText = (e) => {\n    var target = e.target;\n    var name = target.name;\n    var value = target.value;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  _onChangeImage = (e) => {\n    this.setState({\n      images: e.target.files[0],\n    });\n  };\n\n  validate = () => {\n    let priceErro = \"\";\n    if (this.state.txtprice < 0) {\n      priceErro = \"Giá nhập không hợp lệ\";\n    }\n\n    if (priceErro) {\n      this.setState({ txtpriceErro: priceErro });\n      return false;\n    }\n\n    return true;\n  };\n\n\n  _onCreate = (e) => {\n    e.preventDefault();\n    let validate = this.validate();\n    if (validate) {\n      const data = new FormData();\n      data.append(\"id\", this.state.id);\n      data.append(\"name\", this.state.txtname);\n      data.append(\"price\", this.state.txtprice);\n      data.append(\"content\", this.state.txtcontant);\n      data.append(\"user_id\", 1);\n      data.append(\"category_id\", this.state.txtselect);\n      if (this.state.images) {\n        data.append(\"avatar\", this.state.images);\n      }\n\n      if (this.state.id) {\n        this.props.upDateProduct({ data, id: this.state.id });\n      } else {\n        this.thongBao();\n        this.props.getDatatoSubmit(data);\n      }\n      this.props.history.goBack();\n    }\n  };\n\n  render() {\n    const { imagesEdit } = this.state;\n    const { dataCate } = this.props;\n    const notify = () => toast(\"Wow so easy !\",{\n      position: \"top-right\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n      });\n    return (\n      <div\n        className=\"row\"\n        style={{ justifyContent: \"center\", paddingTop: \"50px\" }}\n      >\n      <ToastContainer />\n        <div className=\"col-md-6\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h3\n                style={{\n                  textAlign: \"center\",\n                  color: \"green\",\n                  paddingBottom: \"20px\",\n                  fontWeight: \"bold\",\n                }}\n              >\n                FORM ADD AND EDIT\n              </h3>\n              <form onSubmit={this._onCreate}>\n                <label className=\"my-1 mr-2\">Category</label>\n                <select\n                  className=\"form-control\"\n                  value={this.state.txtselect}\n                  name=\"txtselect\"\n                  onChange={this._onChangeText}\n                  required\n                >\n                  <option value=\"\">Categories</option>\n                  {dataCate.map((e, index) => {\n                    return (\n                      <option key={index} value={e.id}>\n                        {e.name}\n                      </option>\n                    );\n                  })}\n                </select>\n                <div className=\"row mt-5\" style={{ justifyContent: \"center\" }}>\n                  <div className=\"col-md-5\">\n                    <label>Hình ảnh</label>\n                    <div className=\"custom-file\">\n                      <input\n                        type=\"file\"\n                        className=\"custom-file-input\"\n                        accept=\".jpg,.png\"\n                        onChange={this._onChangeImage}\n                        required={!imagesEdit ? true : false}\n                      />\n                      <label\n                        style={{\n                          display: \"inline-block\",\n                          cursor: \"pointer\",\n                          content: \"click me\",\n                        }}\n                        className=\"custom-file-label\"\n                      >\n                        Choose file...\n                      </label>\n                    </div>\n                  </div>\n                  <div className=\"col-md-2\">\n                    <img\n                      style={{ height: \"64px\", width: \"60px\" }}\n                      src={\"http://dboi.info\" + this.state.imagesEdit}\n                      alt=\"\"\n                    />\n                  </div>\n                </div>\n                <div className=\"form-row mt-3\">\n                  <div className=\"col-md-4 mb-3\">\n                    <label>Tên</label>\n                    <input\n                      name=\"txtname\"\n                      value={this.state.txtname}\n                      onChange={this._onChangeText}\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Name\"\n                      style={{ borderColor: \"black\" }}\n                      required\n                    />\n                  </div>\n                  <div className=\"col-md-4 mb-3\">\n                    <label>Giá</label>\n                    <input\n                      name=\"txtprice\"\n                      className=\"form-control\"\n                      onChange={this._onChangeText}\n                      type=\"number\"\n                      placeholder=\"Price\"\n                      value={this.state.txtprice}\n                      style={{ borderColor: \"black\" }}\n                      required\n                    />\n                    {this.state.txtpriceErro ? (\n                      <div style={{ color: \"red\", fontWeight: 600 }}>\n                        {this.state.txtpriceErro}\n                      </div>\n                    ) : null}\n                  </div>\n                  <div className=\"col-md-4 mb-3\">\n                    <div>\n                      <label>Chi tiết</label>\n                      <input\n                        name=\"txtcontant\"\n                        className=\"form-control\"\n                        value={this.state.txtcontant}\n                        onChange={this._onChangeText}\n                        type=\"text\"\n                        placeholder=\"Contant\"\n                        style={{ borderColor: \"black\" }}\n                        required\n                      />\n                    </div>\n                  </div>\n                </div>\n                <button\n                  className=\"btn\"\n                  type=\"submit\"\n                  style={{ background: \"green\", color: \"white\" }}\n                  onClick={notify}\n                >\n                  Thêm\n                </button>\n                <Link\n                  to=\"/admin/quanlysanpham\"\n                  className=\"btn  ml-3\"\n                  style={{\n                    background: \"orange\",\n                    color: \"white\",\n                    borderColor: \"orange\",\n                  }}\n                  type=\"submit\"\n                >\n                  Trở về\n                </Link>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  componentDidMount() {\n    var { match } = this.props;\n    var id = match.params.id;\n    if (match) {\n      this.props.getEditData(id);\n    }\n    this.props.getData();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextprops) {\n    if (nextprops && nextprops.dataEdit) {\n      var { dataEdit } = nextprops;\n      this.setState({\n        id: dataEdit.id,\n        txtname: dataEdit.name,\n        txtprice: dataEdit.price,\n        txtcontant: dataEdit.content,\n        txtselect: dataEdit.category_id,\n        imagesEdit: dataEdit.avatar.url,\n      });\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    dataCate: state.categories.data,\n    dataEdit: state.cateEdit.data,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getDatatoSubmit: (cate) => dispatch({ type: \"PRODUCT_SUBMIT_REQUEST\", cate: cate }),\n    getData: () => dispatch({ type: \"CATE_GET_REQUEST\" }),\n    getEditData: (id) =>\n      dispatch({ type: \"PRODUCT_GET_EDIT_DATA_REQUEST\", id: id }),\n    upDateProduct: ({ data, id }) =>\n      dispatch({\n        type: \"PRODUCT_UPDATE_EDIT_DATA_REQUEST\",\n        data: data,\n        id: id,\n      }),\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(QuanlysanphamADD);\n"]},"metadata":{},"sourceType":"module"}