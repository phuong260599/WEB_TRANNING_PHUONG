{"ast":null,"code":"import { takeLatest, put, all } from \"redux-saga/effects\";\nimport axios from \"axios\";\nimport { LOGIN_MEMBER_REQUEST, LOGIN_MEMBER_SUCCESS } from '../types/member';\nimport { toast } from 'react-toastify';\n\nfunction* loginMember({\n  email,\n  password\n}) {\n  const notifyfaile = () => toast.info(\"Sai tên đăng nhập hoặc mật khẩu\", {\n    position: \"top-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined\n  });\n\n  const notifysucces = () => toast.info(\"Đăng nhập thành công\", {\n    position: \"top-right\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined\n  });\n\n  try {\n    console.log(email, password);\n    const res = yield axios.post(\"http://dboi.info/api/sign_in\", {\n      email: email,\n      password: password\n    });\n\n    if (res.data.data.user.role === \"admin\") {\n      const {\n        data\n      } = res.data;\n      console.log(data);\n      yield put({\n        type: LOGIN_MEMBER_SUCCESS,\n        payload: data\n      });\n      notifysucces();\n    } else {\n      console.log(\"Không có quyền truy cập\");\n    }\n  } catch (error) {\n    console.log(error.response.status);\n\n    if (error.response.status === 401) {\n      localStorage.removeItem(\"LOGINADMIN\");\n    }\n\n    notifyfaile();\n  }\n}\n\nfunction* loginMemberRequest() {\n  yield takeLatest(LOGIN_MEMBER_REQUEST, loginMember);\n}\n\nexport default function* () {\n  yield all([loginMemberRequest()]);\n}","map":{"version":3,"sources":["C:/Users/Phuong/Downloads/Web_thuc_tap/Web_thuc_tap/src/redux/sagas/LoginMember.js"],"names":["takeLatest","put","all","axios","LOGIN_MEMBER_REQUEST","LOGIN_MEMBER_SUCCESS","toast","loginMember","email","password","notifyfaile","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","notifysucces","console","log","res","post","data","user","role","type","payload","error","response","status","localStorage","removeItem","loginMemberRequest"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,GAArB,EAA0BC,GAA1B,QAAqC,oBAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,oBAAR,EAA8BC,oBAA9B,QAAyD,iBAAzD;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,UAAUC,WAAV,CAAsB;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAAtB,EAA2C;AACzC,QAAMC,WAAW,GAAG,MAAMJ,KAAK,CAACK,IAAN,CACxB,iCADwB,EACU;AAClCC,IAAAA,QAAQ,EAAE,WADwB;AAElCC,IAAAA,SAAS,EAAE,IAFuB;AAGlCC,IAAAA,eAAe,EAAE,KAHiB;AAIlCC,IAAAA,YAAY,EAAE,IAJoB;AAKlCC,IAAAA,YAAY,EAAE,IALoB;AAMlCC,IAAAA,SAAS,EAAE,IANuB;AAOlCC,IAAAA,QAAQ,EAAEC;AAPwB,GADV,CAA1B;;AAWE,QAAMC,YAAY,GAAG,MAAMd,KAAK,CAACK,IAAN,CACzB,sBADyB,EACF;AACvBC,IAAAA,QAAQ,EAAE,WADa;AAEvBC,IAAAA,SAAS,EAAE,IAFY;AAGvBC,IAAAA,eAAe,EAAE,KAHM;AAIvBC,IAAAA,YAAY,EAAE,IAJS;AAKvBC,IAAAA,YAAY,EAAE,IALS;AAMvBC,IAAAA,SAAS,EAAE,IANY;AAOvBC,IAAAA,QAAQ,EAAEC;AAPa,GADE,CAA3B;;AAWF,MAAI;AACFE,IAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ,EAAmBC,QAAnB;AACA,UAAMc,GAAG,GAAG,MAAMpB,KAAK,CAACqB,IAAN,CAAW,8BAAX,EAA2C;AAAEhB,MAAAA,KAAK,EAAEA,KAAT;AAAgBC,MAAAA,QAAQ,EAAEA;AAA1B,KAA3C,CAAlB;;AACA,QAAIc,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcC,IAAd,CAAmBC,IAAnB,KAA4B,OAAhC,EAAyC;AACvC,YAAM;AAAEF,QAAAA;AAAF,UAAWF,GAAG,CAACE,IAArB;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AACA,YAAMxB,GAAG,CAAC;AAAE2B,QAAAA,IAAI,EAAEvB,oBAAR;AAA8BwB,QAAAA,OAAO,EAAEJ;AAAvC,OAAD,CAAT;AACAL,MAAAA,YAAY;AACb,KALD,MAKO;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AACF,GAXD,CAWE,OAAOQ,KAAP,EAAc;AACdT,IAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAK,CAACC,QAAN,CAAeC,MAA3B;;AACA,QAAGF,KAAK,CAACC,QAAN,CAAeC,MAAf,KAA0B,GAA7B,EACA;AACEC,MAAAA,YAAY,CAACC,UAAb,CAAwB,YAAxB;AACD;;AACDxB,IAAAA,WAAW;AACZ;AACF;;AAGD,UAAUyB,kBAAV,GAA+B;AAC7B,QAAMnC,UAAU,CAACI,oBAAD,EAAuBG,WAAvB,CAAhB;AACD;;AAED,eAAe,aAAa;AAC1B,QAAML,GAAG,CAAC,CAACiC,kBAAkB,EAAnB,CAAD,CAAT;AACD","sourcesContent":["import { takeLatest, put, all } from \"redux-saga/effects\";\r\nimport axios from \"axios\";\r\nimport {LOGIN_MEMBER_REQUEST, LOGIN_MEMBER_SUCCESS} from '../types/member';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction* loginMember({ email, password }) {\r\n  const notifyfaile = () => toast.info(\r\n    \"Sai tên đăng nhập hoặc mật khẩu\",{\r\n    position: \"top-right\",\r\n    autoClose: 3000,\r\n    hideProgressBar: false,\r\n    closeOnClick: true,\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    progress: undefined,\r\n    });\r\n  \r\n    const notifysucces = () => toast.info(\r\n      \"Đăng nhập thành công\",{\r\n      position: \"top-right\",\r\n      autoClose: 3000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      });\r\n\r\n  try {\r\n    console.log(email, password);\r\n    const res = yield axios.post(\"http://dboi.info/api/sign_in\", { email: email, password: password, });\r\n    if (res.data.data.user.role === \"admin\") {\r\n      const { data } = res.data;\r\n      console.log(data);\r\n      yield put({ type: LOGIN_MEMBER_SUCCESS, payload: data});\r\n      notifysucces()\r\n    } else {\r\n      console.log(\"Không có quyền truy cập\");\r\n    }\r\n  } catch (error) {\r\n    console.log(error.response.status)\r\n    if(error.response.status === 401)\r\n    {\r\n      localStorage.removeItem(\"LOGINADMIN\");\r\n    }\r\n    notifyfaile()\r\n  }\r\n}\r\n\r\n\r\nfunction* loginMemberRequest() {\r\n  yield takeLatest(LOGIN_MEMBER_REQUEST, loginMember);\r\n}\r\n\r\nexport default function* () {\r\n  yield all([loginMemberRequest()]);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}